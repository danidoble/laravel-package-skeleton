<?php

namespace Danidoble\LaravelPackageSkeleton\Support;

use Illuminate\View\ComponentAttributeBag;
use Danidoble\Exposer\Support\BladeDirectives;

class LaravelPackageSkeletonDirectives extends BladeDirectives
{
    public function styles(bool $absolute = true): string
    {
        $route = route('package.assets.styles', [], $absolute);
        $version = $this->getManifestVersion(__DIR__, 'app', 'css', $route);

        return "<link href=\"{$route}?id={$version}\" rel=\"stylesheet\" type=\"text/css\">";
    }

    public function scripts(bool $absolute = true, array $attributes = []): string
    {
        $route = route('package.assets.scripts', [], $absolute);
        $version = $this->getManifestVersion(__DIR__, 'app', 'js', $route);

        $attributes = new ComponentAttributeBag($attributes);

        return <<<HTML
        <script src="{$route}?id={$version}" defer {$attributes->toHtml()}></script>
        HTML;
    }
}
